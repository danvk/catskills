"use strict";(()=>{var w=Object.defineProperty,L=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var y=(e,t,a)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,r=(e,t)=>{for(var a in t||={})$.call(t,a)&&y(e,a,t[a]);if(k)for(var a of k(t))T.call(t,a)&&y(e,a,t[a]);return e},u=(e,t)=>L(e,j(t));var A=(e,t)=>()=>(e&&(t=e(e=0)),t);var E=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var h=(e,t,a)=>new Promise((n,o)=>{var d=i=>{try{s(a.next(i))}catch(m){o(m)}},c=i=>{try{s(a.throw(i))}catch(m){o(m)}},s=i=>i.done?n(i.value):Promise.resolve(i.value).then(d,c);s((a=a.apply(e,t)).next())});var p,f,x,g,b,S=A(()=>{"use strict";p={type:"line",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":["match",["get","season"],"winter","white","spring","limegreen","summer","green","fall","orange","green"],"line-width":4}},f=u(r({},p),{paint:u(r({},p.paint),{"line-width":["case",["boolean",["feature-state","hover"],!1],6,0]})}),x=u(r({},p),{paint:{"line-color":"gray","line-width":["case",["boolean",["feature-state","hover"],!1],8,0]}}),g=["match",["get","type"],"dec","darkgreen","trail","brown","bushwhack","red","closed","pink","black"],b={type:"line",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"brown","line-width":1}}});var z=E(v=>{S();new EventSource("/esbuild").addEventListener("change",()=>location.reload());mapboxgl.accessToken="pk.eyJ1IjoiZGFudmsiLCJhIjoiY2lrZzJvNDR0MDBhNXR4a2xqNnlsbWx3ciJ9.myJhweYd_hrXClbKk8XLgQ";var l=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/outdoors-v12",center:[-74.36398700976565,42.0922169187148],zoom:10});l.on("load",()=>{l.addSource("mapbox-dem",{type:"raster-dem",url:"mapbox://mapbox.mapbox-terrain-dem-v1",tileSize:512,maxzoom:14}),l.setTerrain({source:"mapbox-dem",exaggeration:1.5}),l.addSource("tracks",{type:"geojson",data:"tracks.geojson"}).addSource("catskill-park",{type:"geojson",data:"catskill-park.geojson"}).addLayer(r({id:"catskill-park",source:"catskill-park"},b)).addLayer(r({id:"tracks",source:"tracks"},p)).addLayer(r({id:"tracks-highlight-outline",source:"tracks"},x)).addLayer(r({id:"tracks-highlight",source:"tracks"},f)).addSource("peaks",{type:"geojson",data:"high-peaks.geojson"}).addLayer({id:"peak-labels",type:"symbol",source:"peaks",layout:{"text-field":["get","name"],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":12,"text-offset":[0,1],"text-anchor":"top"},paint:{"text-color":g}}).addLayer({id:"peaks",type:"circle",source:"peaks",layout:{},paint:{"circle-radius":4,"circle-color":g,"circle-stroke-color":"white"}});let e;l.on("mousemove","tracks",t=>{var a,n;if((a=t.features)!=null&&a.length){e!==void 0&&l.setFeatureState({source:"tracks",id:e},{hover:!1}),e=t.features[0].id;let o=t.features[0].properties.slug;l.setFeatureState({source:"tracks",id:e},{hover:!0}),(n=document.querySelector(`[data-slug="${o}"]`))==null||n.classList.add("hovered")}}).on("mouseleave","tracks",t=>{e!==null&&l.setFeatureState({source:"tracks",id:e},{hover:!1}),e=void 0;for(let a of document.querySelectorAll(".hike"))a.classList.remove("hovered")})});(()=>h(v,null,function*(){let e=yield fetch("log.json");if(!e.ok)throw new Error(e.status+" "+e.statusText);let t=yield e.json(),a=document.getElementById("hike-list"),n=null;for(let o of t){let d=o.date.slice(0,4);if(d!==n){n=d;let s=document.createElement("h1");s.textContent=String(d),a==null||a.append(s)}let c=document.createElement("div");c.className="hike",c.innerHTML=`
      <span class="date">${o.date}</span>
      <span class="stats">${o.miles}mi ${o.type} / ${o.hike_hours}h</span>
      <h2><a href="${o.url}">${o.title}</a></h2>
      ${o.peaks.map(s=>`<span class="peak">${s}</span>`).join("")}<br>
    `,c.setAttribute("data-slug",o.slug),a==null||a.append(c)}}))().catch(e=>{console.error(e)})});z();})();
